{"version":3,"sources":["../src/index.jsx"],"names":["isType","type","val","undefined","includes","constructor","isInstanceOf","isNormalFunction","f","name","toLowerCase","isConstructor","err","isPrimitive","value","Object","checkObject","whatToDo","types","props","propsTypes","keys","filter","notIsRegExp","regExpToCheck","isRegExp","untestedReceivedProps","propName","allValids","forEach","push","regexpString","stringToRegExp","test","every","Boolean","checkShape","isValidType","RegExp","checkRegExp","Array","some","_type","toString","JSON","stringify","testOrWarn","error","console","regExp","string","eval","typedComponent","defaults","Component","_props"],"mappings":"yPAAA,oD,wgCAEO,GAAMA,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAAAC,IAAI,QAAI,UAAAC,GAAG,QAC/B,CAAC,CAACC,SAAD,CAAY,IAAZ,EAAkBC,QAAlB,CAA2BF,GAA3B,CAAD,EAAoCA,GAAG,CAACG,WAAJ,GAAoBJ,IADzB,CAAP,CAAnB,C,sBAGA,GAAMK,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAAL,IAAI,QAAI,UAAAC,GAAG,QAAIA,CAAAA,GAAG,WAAYD,CAAAA,IAAnB,CAAP,CAAzB,C,kCAEA,GAAMM,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAAAC,CAAC,QAC/B,OAAOA,CAAAA,CAAP,GAAa,UAAb,GACC,CAACA,CAAC,CAACC,IAAH,EAAWD,CAAC,CAACC,IAAF,CAAO,CAAP,IAAcD,CAAC,CAACC,IAAF,CAAO,CAAP,EAAUC,WAAV,EAD1B,CAD+B,CAA1B,C,0CAIA,QAASC,CAAAA,aAAT,CAAuBH,CAAvB,CAA0B,CAE/B,GAAID,gBAAgB,CAACC,CAAD,CAApB,CAAyB,MAAO,MAAP,CAEzB,GAAI,CACF,GAAIA,CAAAA,CACL,CAAC,MAAOI,GAAP,CAAY,CACZ,MAAO,MACR,CACD,MAAO,KACR,CAEM,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAAAC,KAAK,QAAI,EAAEA,KAAK,WAAYC,CAAAA,MAAnB,CAAJ,CAAzB,C,gCAGP,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,QAAD,CAAWC,KAAX,CAAkBC,KAAlB,CAA4B,CAC9C,GAAMC,CAAAA,UAAU,CAAGL,MAAM,CAACM,IAAP,CAAYH,KAAZ,EAAmBI,MAAnB,CAA0BC,WAA1B,CAAnB,CACA,GAAMC,CAAAA,aAAa,CAAGT,MAAM,CAACM,IAAP,CAAYH,KAAZ,EAAmBI,MAAnB,CAA0BG,QAA1B,CAAtB,CAEA,GAAMC,CAAAA,qBAAqB,CAAGX,MAAM,CAACM,IAAP,CAAYF,KAAZ,EAAmBG,MAAnB,CAC5B,SAAAK,QAAQ,QAAI,CAACP,UAAU,CAAChB,QAAX,CAAoBuB,QAApB,CAAL,CADoB,CAA9B,CAGA,GAAIC,CAAAA,SAAS,CAAG,EAAhB,CAEAR,UAAU,CAACS,OAAX,CAAmB,SAAAF,QAAQ,CAAI,CAC7BC,SAAS,CAACE,IAAV,CAAeb,QAAQ,CACrBC,KAAK,CAACS,QAAD,CADgB,CAErBR,KAAK,CAACQ,QAAD,CAFgB,CAGrBR,KAHqB,CAIrBQ,QAJqB,CAAvB,CAMD,CAPD,EAQAH,aAAa,CAACK,OAAd,CAAsB,SAAAE,YAAY,CAAI,CACpCL,qBAAqB,CAACG,OAAtB,CAA8B,SAAAF,QAAQ,CAAI,CACxC,GAAIK,cAAc,CAACD,YAAD,CAAd,CAA6BE,IAA7B,CAAkCN,QAAlC,CAAJ,CAAiD,CAC/CC,SAAS,CAACE,IAAV,CAAeb,QAAQ,CACrBC,KAAK,CAACa,YAAD,CADgB,CAErBZ,KAAK,CAACQ,QAAD,CAFgB,CAGrBR,KAHqB,CAIrBQ,QAJqB,CAAvB,CAMD,CACF,CATD,CAUD,CAXD,EAYA,MAAOC,CAAAA,SAAS,CAACM,KAAV,CAAgBC,OAAhB,CACR,CA9BD,CAgCO,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAAClB,KAAD,CAAQC,KAAR,QAAkBH,CAAAA,WAAW,CAACqB,WAAD,CAAcnB,KAAd,CAAqBC,KAArB,CAA7B,CAAnB,C,8BAEA,GAAMkB,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACpC,IAAD,CAAOa,KAAP,CAAcK,KAAd,CAAqBQ,QAArB,CAAkC,CAC3D,GAAI3B,MAAM,CAACsC,MAAD,CAAN,CAAerC,IAAf,CAAJ,CAA0B,CACxB,MAAOsC,CAAAA,WAAW,CAACtC,IAAD,CAAOa,KAAP,CACnB,CAFD,IAEO,IAAID,WAAW,CAACZ,IAAD,CAAf,CAAuB,CAC5B,MAAOa,CAAAA,KAAK,GAAKb,IAClB,CAFM,IAEA,IAAIU,aAAa,CAACV,IAAD,CAAjB,CAAyB,CAC9B,MAAOD,CAAAA,MAAM,CAACC,IAAD,CAAN,CAAaa,KAAb,CACR,CAFM,IAEA,IAAId,MAAM,CAACwC,KAAD,CAAN,CAAcvC,IAAd,CAAJ,CAAyB,CAC9B,MAAOA,CAAAA,IAAI,CAACwC,IAAL,CAAU,SAAAC,KAAK,QAAIL,CAAAA,WAAW,CAACK,KAAD,CAAQ5B,KAAR,CAAf,CAAf,CACR,CAFM,IAEA,IAAId,MAAM,CAACe,MAAD,CAAN,CAAed,IAAf,GAAwBa,KAAK,WAAYC,CAAAA,MAA7C,CAAqD,CAC1D,MAAOqB,CAAAA,UAAU,CAACnC,IAAD,CAAOa,KAAP,CAAjB,CAA+B,CAChC,CAFM,IAEA,IAAIP,gBAAgB,CAACN,IAAD,CAApB,CAA4B,CACjC,MAAOA,CAAAA,IAAI,CAACa,KAAD,CAAQK,KAAR,CAAeQ,QAAf,CACZ,CACD,MAAO,MACR,CAfM,C,gCAiBP,GAAMgB,CAAAA,QAAQ,CAAGC,IAAI,CAACC,SAAtB,CAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAAC7C,IAAD,CAAOa,KAAP,CAAcK,KAAd,CAAqBQ,QAArB,CAAkC,CACnD,GAAI,CACF,MACEU,CAAAA,WAAW,CAACpC,IAAD,CAAOa,KAAP,CAAcK,KAAd,CAAqBQ,QAArB,CAAX,EACAoB,KAAK,gBACKpB,QADL,wBAC4BgB,QAAQ,CACrC7B,KADqC,CADpC,+BAGoB6B,QAAQ,CAAC1C,IAAD,CAH5B,EAMR,CAAC,MAAO8C,KAAP,CAAc,CACd,MAAOA,CAAAA,KAAK,CAACA,KAAD,CACb,CACF,CAbD,CAeA,GAAMA,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,EAAa,cACzB,UAAAC,OAAO,EAACD,KAAR,0BAED,CAHD,CAKA,GAAMR,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACU,MAAD,CAASnC,KAAT,QAAmBmC,CAAAA,MAAM,CAAChB,IAAP,CAAYnB,KAAZ,CAAnB,CAApB,CACA,GAAMkB,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAAAkB,MAAM,QAAI,IAAIZ,CAAAA,MAAJ,CAAWa,IAAI,CAACD,MAAD,CAAf,CAAJ,CAA7B,CACA,GAAMzB,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAAAX,KAAK,QAAIA,CAAAA,KAAK,EAAI,WAAWmB,IAAX,CAAgBnB,KAAhB,CAAb,CAAtB,CACA,GAAMS,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAAAT,KAAK,QAAI,CAACW,QAAQ,CAACX,KAAD,CAAb,CAAzB,CAEA,GAAMsC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,MACrBlC,CAAAA,KADqB,2DACb,EADa,IAErBmC,CAAAA,QAFqB,2DAEV,EAFU,OAGlB,UAAAC,SAAS,QAAI,UAAAnC,KAAK,CAAI,CACzBH,WAAW,CAAC8B,UAAD,CAAa5B,KAAb,CAAoBC,KAApB,CAAX,CAEA,GAAMoC,CAAAA,MAAM,kBACPF,QADO,IAEPlC,KAFO,CAAZ,CAKA,MAAO,8BAAC,SAAD,CAAeoC,MAAf,CACR,CATa,CAHS,CAAvB,C,aAceH,c","sourcesContent":["import React from 'react';\n\nexport const isType = type => val =>\n  ![undefined, null].includes(val) && val.constructor === type;\n\nexport const isInstanceOf = type => val => val instanceof type;\n\nexport const isNormalFunction = f =>\n  typeof f === 'function' &&\n  (!f.name || f.name[0] === f.name[0].toLowerCase());\n\nexport function isConstructor(f) {\n  // detect is a normal function (anonymous or its name starts with lowercase)\n  if (isNormalFunction(f)) return false;\n\n  try {\n    new f();\n  } catch (err) {\n    return false;\n  }\n  return true;\n}\n\nexport const isPrimitive = value => !(value instanceof Object);\n// export const isPrimitive = value => Object(value) !== value;\n\nconst checkObject = (whatToDo, types, props) => {\n  const propsTypes = Object.keys(types).filter(notIsRegExp);\n  const regExpToCheck = Object.keys(types).filter(isRegExp);\n\n  const untestedReceivedProps = Object.keys(props).filter(\n    propName => !propsTypes.includes(propName),\n  );\n  let allValids = [];\n\n  propsTypes.forEach(propName => {\n    allValids.push(whatToDo(\n      types[propName],\n      props[propName],\n      props,\n      propName,\n    ))\n  });\n  regExpToCheck.forEach(regexpString => {\n    untestedReceivedProps.forEach(propName => {\n      if (stringToRegExp(regexpString).test(propName)) {\n        allValids.push(whatToDo(\n          types[regexpString],\n          props[propName],\n          props,\n          propName,\n        ))\n      }\n    });\n  });\n  return allValids.every(Boolean);\n};\n\nexport const checkShape = (types, props) => checkObject(isValidType, types, props);\n\nexport const isValidType = (type, value, props, propName) => {\n  if (isType(RegExp)(type)) {\n    return checkRegExp(type, value);\n  } else if (isPrimitive(type)) {\n    return value === type;\n  } else if (isConstructor(type)) {\n    return isType(type)(value);\n  } else if (isType(Array)(type)) {\n    return type.some(_type => isValidType(_type, value));\n  } else if (isType(Object)(type) && value instanceof Object) {\n    return checkShape(type, value);;\n  } else if (isNormalFunction(type)) {\n    return type(value, props, propName);\n  }\n  return false;\n};\n\nconst toString = JSON.stringify;\n\nconst testOrWarn = (type, value, props, propName) => {\n  try {\n    return (\n      isValidType(type, value, props, propName) ||\n      error(\n        `prop ${propName} with value ${toString(\n          value,\n        )} do not match type ${toString(type)}`,\n      )\n    );\n  } catch (error) {\n    return error(error);\n  }\n};\n\nconst error = (...args) => {\n  console.error(...args);\n  // console.log(...args);\n};\n\nconst checkRegExp = (regExp, value) => regExp.test(value);\nconst stringToRegExp = string => new RegExp(eval(string));\nconst isRegExp = value => value && /^\\/.+\\/$/.test(value);\nconst notIsRegExp = value => !isRegExp(value);\n\nconst typedComponent = (\n  types = {},\n  defaults = {},\n) => Component => props => {\n  checkObject(testOrWarn, types, props);\n\n  const _props = {\n    ...defaults,\n    ...props,\n  };\n\n  return <Component {..._props} />;\n};\n\nexport default typedComponent;\n"],"file":"index.js"}