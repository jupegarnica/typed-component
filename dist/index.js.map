{"version":3,"sources":["../src/index.jsx"],"names":["isType","type","val","undefined","includes","constructor","isInstanceOf","isNormalFunction","f","name","toLowerCase","isConstructor","err","isPrimitive","value","Object","iterateObject","whatToDo","types","props","propsTypes","keys","filter","notIsRegExp","regExpToCheck","isRegExp","untestedReceivedProps","propName","response","forEach","regexpString","stringToRegExp","test","checkShape","isValidType","RegExp","checkRegExp","Array","some","_type","toString","JSON","stringify","testOrWarn","error","console","regExp","string","eval","typedComponent","defaults","Component","_props"],"mappings":"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","sourcesContent":["import React from 'react';\n\nexport const isType = type => val =>\n  ![undefined, null].includes(val) && val.constructor === type;\n\nexport const isInstanceOf = type => val => val instanceof type;\n\nexport const isNormalFunction = f =>\n  typeof f === 'function' &&\n  (!f.name || f.name[0] === f.name[0].toLowerCase());\n\nexport function isConstructor(f) {\n  // detect is a normal function (anonymous or its name starts with lowercase)\n  if (isNormalFunction(f)) return false;\n\n  try {\n    new f();\n  } catch (err) {\n    return false;\n  }\n  return true;\n}\n\nexport const isPrimitive = value => !(value instanceof Object);\n// export const isPrimitive = value => Object(value) !== value;\n\nconst iterateObject = (whatToDo, types, props) => {\n  const propsTypes = Object.keys(types).filter(notIsRegExp);\n  const regExpToCheck = Object.keys(types).filter(isRegExp);\n\n  const untestedReceivedProps = Object.keys(props).filter(\n    propName => !propsTypes.includes(propName),\n  );\n  if (whatToDo.name === 'isValidType') {\n    // console.log('untestedReceivedProps', untestedReceivedProps);\n    // console.log('propsTypes', propsTypes);\n    // console.log('regExpToCheck', regExpToCheck);\n  }\n  let response;\n\n  propsTypes.forEach(propName => {\n    response = whatToDo(\n      types[propName],\n      props[propName],\n      props,\n      propName,\n    );\n  });\n  regExpToCheck.forEach(regexpString => {\n    untestedReceivedProps.forEach(propName => {\n      if (stringToRegExp(regexpString).test(propName)) {\n        response = whatToDo(\n          types[regexpString],\n          props[propName],\n          props,\n          propName,\n        );\n      }\n    });\n  });\n  return response;\n};\n\nexport const checkShape = (types, props) =>\n  iterateObject(isValidType, types, props);\n\nexport const isValidType = (type, value, props, propName) => {\n  if (isType(RegExp)(type)) {\n    return checkRegExp(type, value);\n  } else if (isPrimitive(type)) {\n    return value === type;\n  } else if (isConstructor(type)) {\n    return isType(type)(value);\n  } else if (isType(Array)(type)) {\n    return type.some(_type => isValidType(_type, value));\n  } else if (isType(Object)(type) && isType(Object)(value)) {\n    return checkShape(type, value);\n  } else if (isNormalFunction(type)) {\n    return type(value, props, propName);\n  }\n  return false;\n};\n\nconst toString = JSON.stringify;\n\nconst testOrWarn = (type, value, props, propName) => {\n  try {\n    return isValidType(type, value, props, propName) ||\n      error(\n        `prop ${propName} with value ${toString(\n          value,\n        )} do not match type ${toString(type)}`,\n      );\n  } catch (error) {\n    return error(error);\n  }\n};\n\nconst error = (...args) => {\n  console.error(...args);\n  // console.log(...args);\n};\n\nconst checkRegExp = (regExp, value) => regExp.test(value);\nconst stringToRegExp = string => new RegExp(eval(string));\nconst isRegExp = value => value && /^\\/.+\\/$/.test(value);\nconst notIsRegExp = value => !isRegExp(value);\n\nconst typedComponent = (\n  types = {},\n  defaults = {},\n) => Component => props => {\n  iterateObject(testOrWarn, types, props);\n\n  const _props = {\n    ...defaults,\n    ...props,\n  };\n\n  return <Component {..._props} />;\n};\n\nexport default typedComponent;\n"],"file":"index.js"}