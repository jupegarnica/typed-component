{"version":3,"sources":["../src/index.jsx"],"names":["isType","type","val","undefined","includes","constructor","isInstanceOf","isNormalFunction","f","name","toLowerCase","isConstructor","err","isPrimitive","value","Object","iterateObject","whatToDo","types","props","propsTypes","keys","filter","notIsRegExp","regExpToCheck","isRegExp","untestedReceivedProps","propName","console","log","response","forEach","regexpString","stringToRegExp","test","checkShape","isValidType","RegExp","checkRegExp","Array","some","_type","toString","JSON","stringify","testOrWarn","error","regExp","string","eval","typedComponent","defaults","Component","_props"],"mappings":"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","sourcesContent":["import React from 'react';\n\nexport const isType = type => val =>\n  ![undefined, null].includes(val) && val.constructor === type;\n\nexport const isInstanceOf = type => val => val instanceof type;\n\nexport const isNormalFunction = f =>\n  typeof f === 'function' &&\n  (!f.name || f.name[0] === f.name[0].toLowerCase());\n\nexport function isConstructor(f) {\n  // detect is a normal function (anonymous or its name starts with lowercase)\n  if (isNormalFunction(f)) return false;\n\n  try {\n    new f();\n  } catch (err) {\n    return false;\n  }\n  return true;\n}\n\nexport const isPrimitive = value => !(value instanceof Object);\n// export const isPrimitive = value => Object(value) !== value;\n\nconst iterateObject = (whatToDo, types, props) => {\n  const propsTypes = Object.keys(types).filter(notIsRegExp);\n  const regExpToCheck = Object.keys(types).filter(isRegExp);\n\n  const untestedReceivedProps = Object.keys(props).filter(\n    propName => !propsTypes.includes(propName),\n  );\n  if (whatToDo.name === 'isValidType') {\n    console.log('untestedReceivedProps', untestedReceivedProps);\n    console.log('propsTypes', propsTypes);\n    console.log('regExpToCheck', regExpToCheck);\n  }\n  let response;\n\n  propsTypes.forEach(propName => {\n    response = whatToDo(\n      types[propName],\n      props[propName],\n      props,\n      propName,\n    );\n\n  });\n  regExpToCheck.forEach(regexpString => {\n    untestedReceivedProps.forEach(propName => {\n      if (stringToRegExp(regexpString).test(propName)) {\n        response = whatToDo(\n          types[regexpString],\n          props[propName],\n          props,\n          propName,\n        );\n      }\n    });\n  });\n  return response;\n};\n\nexport const checkShape = (types, props) =>\n  iterateObject(isValidType, types, props);\n\nexport const isValidType = (type, value, props, propName) => {\n  if (isType(RegExp)(type)) {\n    return checkRegExp(type, value);\n  } else if (isPrimitive(type)) {\n    return value === type;\n  } else if (isNormalFunction(type)) {\n    return type(value, props, propName);\n  } else if (isConstructor(type)) {\n    return isType(type)(value);\n  } else if (isType(Array)(type)) {\n    return type.some(_type => isValidType(_type, value));\n  } else if (isType(Object)(type) && isType(Object)(value)) {\n    return checkShape(type, value);\n  }\n  return false;\n};\n\nconst toString = JSON.stringify;\n\nconst testOrWarn = (type, value, props, propName) => {\n  try {\n    isValidType(type, value, props, propName) ||\n      error(\n        `prop ${propName} with value ${toString(\n          value,\n        )} do not match type ${toString(type)}`,\n      );\n  } catch (error) {\n    error(error);\n  }\n};\n\nconst error = (...args) => {\n  console.error(...args);\n  console.log(...args);\n};\n\nconst checkRegExp = (regExp, value) => regExp.test(value);\nconst stringToRegExp = string => new RegExp(eval(string));\nconst isRegExp = value => value && /^\\/.+\\/$/.test(value);\nconst notIsRegExp = value => !isRegExp(value);\n\nconst typedComponent = (\n  types = {},\n  defaults = {},\n) => Component => props => {\n  iterateObject(testOrWarn, types, props);\n\n  const _props = {\n    ...defaults,\n    ...props,\n  };\n\n  return <Component {..._props} />;\n};\n\nexport default typedComponent;\n"],"file":"index.js"}